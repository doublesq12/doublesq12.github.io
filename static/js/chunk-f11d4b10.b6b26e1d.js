(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f11d4b10"],{1427:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:t.title}},[a("el-input",{attrs:{placeholder:"请输入",clearable:!0,maxlength:t.number,"show-word-limit":""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)},n=[],i={components:{},props:{title:{type:String,default:""},model:{type:String,default:""},number:{type:String,default:""},maxlength:{type:String,default:""},prop:{type:Array}},data:function(){return{input:""}},computed:{},watch:{input:{handler:function(t,e){this.$emit("update:model",t)}}},created:function(){},mounted:function(){},methods:{}},o=i,s=(a("e773"),a("2877")),c=Object(s["a"])(o,r,n,!1,null,"490c980f",null);e["a"]=c.exports},"1e92":function(t,e,a){},"204e":function(t,e,a){},"22a1":function(t,e,a){},7217:function(t,e,a){"use strict";a("22a1")},8147:function(t,e,a){"use strict";a("204e")},"88fd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"regionalManagement"},[a("div",{staticClass:"top"},[a("el-form",{staticClass:"form",attrs:{"label-position":"right","label-width":"80px"}},[a("search",{attrs:{title:"区域搜索:",model:t.searchName},on:{"update:model":function(e){t.searchName=e}}}),a("lsButton",{attrs:{icon:"el-icon-search",size:"mini",title:"查询"},on:{click:function(e){return t.PartnerSearch()}}})],1)],1),a("div",{staticClass:"new"},[a("lsButton",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",title:"新建",color:"addBtn"},on:{click:function(e){t.dialogVisible1=!0}}}),a("el-table",{attrs:{data:t.PartnerData.currentPageRecords}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{label:"合作商名称",prop:"name"}}),a("el-table-column",{attrs:{label:"账号",prop:"account"}}),a("el-table-column",{attrs:{label:"联系人",prop:"contact"}}),a("el-table-column",{attrs:{label:"合作商名称",prop:"name"}}),a("el-table-column",{attrs:{label:"联系电话",prop:"mobile"}}),a("el-table-column",{attrs:{label:"分成比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.ratio+"%"))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.ResetPassword(e.row.id)}}},[t._v("重置密码")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.DetailsBtn(e.row)}}},[t._v("查看详情")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.Modify(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.DeletePartner(e.row.id)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"合作商详情",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("合作商名称："+t._s(t.PartnerDetails.name))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("联系人："+t._s(t.PartnerDetails.contact))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("联系电话："+t._s(t.PartnerDetails.mobile))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("分成比例："+t._s(t.PartnerDetails.ratio))])])],1)],1),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible1,width:"40%","label-position":"left"},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"合作商名称:",prop:"name"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"联系人:",prop:"contact"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}})],1),a("el-form-item",{attrs:{label:"联系电话:",prop:"mobile"}},[a("el-input",{attrs:{maxlength:"11","show-word-limit":""},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}})],1),a("el-form-item",{attrs:{label:"分成比例(%):",prop:"ratio"}},[a("el-input-number",{attrs:{"controls-position":"right",max:100},model:{value:t.formData.ratio,callback:function(e){t.$set(t.formData,"ratio",t._n(e))},expression:"formData.ratio"}})],1),a("el-form-item",{attrs:{label:"账号:",prop:"account"}},[a("el-input",{attrs:{maxlength:"18","show-word-limit":""},model:{value:t.formData.account,callback:function(e){t.$set(t.formData,"account",e)},expression:"formData.account"}})],1),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("div",{staticClass:"addWorkBtn"},[a("lsButton",{attrs:{title:"取消",color:"config"}}),a("lsButton",{attrs:{title:"确定",color:"addBtn"},on:{click:t.AddPartner}})],1)],1)],1)],1)])},n=[],i=a("c7eb"),o=a("1da1"),s=(a("b0c0"),a("1427")),c=a("ab94"),l=a("b775"),u=function(t){return Object(l["a"])({url:" /api/user-service/partner/search",params:t})},m=function(t){return Object(l["a"])({url:"/api/user-service/partner/resetPwd/"+t,method:"PUT"})},p=function(t){return Object(l["a"])({url:"/api/user-service/partner/"+t,method:"DELETE"})},d=function(t){return Object(l["a"])({url:"/api/user-service/partner",method:"POST",data:t})},f=function(t,e){return Object(l["a"])({url:"/api/user-service/partner/"+t,method:"PUT",data:e})},b={components:{search:s["a"],lsButton:c["a"]},data:function(){return{PartnerDetails:{name:"",contact:"",mobile:"",ratio:""},PartnerData:{},dialogVisible:!1,jub:!0,title:"新增合作商",dialogVisible1:!1,formData:{password:"",account:"",ratio:"",mobile:"",contact:"",name:""},formRules:{name:[{required:!0,message:"请输入合作商名称",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],account:[{required:!0,message:"请输入账号",trigger:"change"}],ratio:[{required:!0,message:"请输入比例",trigger:"change"},{type:"number",message:"比例必须为数字值"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"change"},{min:11,max:11,message:"请输入11位手机号码",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"请输入正确的手机号码"}],contact:[{required:!0,message:"请输入联系人",trigger:"change"}]},searchName:""}},computed:{},watch:{},created:function(){this.PartnerSearch()},mounted:function(){},methods:{PartnerSearch:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u({pageSize:1e6,name:t.searchName});case 2:a=e.sent,r=a.data,t.PartnerData=r;case 5:case"end":return e.stop()}}),e)})))()},ResetPassword:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$confirm("此操作将会重置合作商密码",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m(t),e.$message.success("重置成功")}));case 1:case"end":return a.stop()}}),a)})))()},DetailsBtn:function(t){this.PartnerDetails.ratio=t.ratio,this.PartnerDetails.name=t.name,this.PartnerDetails.mobile=t.mobile,this.PartnerDetails.contact=t.contact,this.dialogVisible=!0},DeletePartner:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$confirm("此操作将会依旧删除合作商",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return p(t),a.next=3,e.PartnerSearch();case 3:e.$message.success("删除成功");case 4:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},AddPartner:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.formData.validate();case 3:if(!t.jub){e.next=14;break}return e.next=6,d(t.formData);case 6:if(a=e.sent,!a){e.next=12;break}return t.$message.success("添加成功"),e.next=11,t.PartnerSearch();case 11:t.dialogVisible1=!1;case 12:e.next=22;break;case 14:return e.next=16,f(t.formData.id,t.formData);case 16:if(r=e.sent,!r){e.next=22;break}return t.$message.success("修改成功"),e.next=21,t.PartnerSearch();case 21:t.dialogVisible1=!1;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))()},Modify:function(t){this.formData=t,this.dialogVisible1=!0,this.jub=!1,this.title="修改合作商"}}},h=b,g=(a("8147"),a("2877")),w=Object(g["a"])(h,r,n,!1,null,"7c7ac1a2",null);e["default"]=w.exports},ab94:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{staticClass:"search",class:t.color,attrs:{disabled:t.disable,type:"primary",icon:t.icon},nativeOn:{click:function(e){return t.btn(e)}}},[t._v(t._s(t.title))])},n=[],i={components:{},props:{color:{type:String,default:"search"},title:{type:String,default:"搜索"},icon:{type:String,default:"icon"},disable:{type:Boolean,default:!1}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{btn:function(){this.$emit("click")}}},o=i,s=(a("7217"),a("2877")),c=Object(s["a"])(o,r,n,!1,null,"53ec6d56",null);e["a"]=c.exports},e773:function(t,e,a){"use strict";a("1e92")}}]);